<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <title>How to create offer ID hashes - college-costs</title>
    
    

    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/syntax.css">
    

    
    <style type="text/css">
        .sidebar-nav a:hover,
        .sidebar-nav a:focus,
        .sidebar-nav a:active,
        .sidebar-nav a.sidebar-nav-active {
            border-left-color: #2CB34A;
        }
        header {
            border-bottom-color: #2CB34A;
        }
    </style>
    

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <script src="../js/respond.min.js"></script>
    <![endif]--> 
</head>

<body>
    
    <div class="container">
        <header role="banner">
            <div class="wrap">
                
                <img class="logo" src="https://cfpb.github.io/img/logo_210.png" alt="Consumer Financial Protection Bureau">
                
                <h1 class="site-title"><a class="title-link" href="../">college-costs</a></h1>
            </div>
        </header>
    
        <div class="wrap content">
            <aside>
                <nav class="sidebar-nav" role="navigation">
                    <ul>
                        
                        <li>
                             
                            <a href=".." class="">Introduction</a>

                            
                        </li>
                        
                        <li>
                            
                            <span>Specifications</span>
                            <ul class="secondary-nav">
                                
                                <li>
                                    <a href="../csv-spec/" class="">CSV spec for program data</a>
                                </li>
                                
                                <li>
                                    <a href="../url-spec/" class="">URL spec for offer data</a>
                                </li>
                                
                                <li>
                                    <a href="../notification-spec/" class="">Notification spec validating offers</a>
                                </li>
                                
                                <li>
                                    <a href="./" class="sidebar-nav-active">How to create offer ID hashes</a>
                                </li>
                                
                            </ul>
                            
                        </li>
                        
                    </ul>
                </nav>
            </aside>

            <section id="main" class="main-content" role="main">
                <h2 id="offer-ids">Offer IDs</h2>
<p>Offer IDs allow a school to provide a disclosure of a student's enrollment offer without revealing who the student is. They also allow the CFPB to send confirmations to the school that a disclosure was reviewed by a student, but without transmitting any information about the student.</p>
<p>Only the school will know which student the offer ID applies to.</p>
<p>Two important details to note:  </p>
<ul>
<li><strong>The first seven characters in the offer ID should be given to the student so that she can confirm on the  disclosure page that the offer is hers.</strong> </li>
<li><strong>An offer ID can be used only once.</strong><br />
If an offer ID generates a notification, either successful or with an error, it cannot be used again to validate an offer. If a student needs to re-evaluate an offer, an new offer ID needs to be generated and used in a new offer URL. </li>
</ul>
<h2 id="technical-details">Technical details</h2>
<p>We chose a 40-hex-character hash as the form for an offer ID because it has two advantages:  </p>
<ul>
<li>The hashes contain only numbers and the letters a-f and are safe to transmit and accept.</li>
<li>Unique hash values are easy to create in a way that cannot be traced back to a student.</li>
</ul>
<p>The school can decide what values to use to generate the offer ID hashes. 
One easy method would be to combine a timestamp and another value -- such as a student ID or even a completely random number or numbers -- and generate a SHA-1 hash from those values.</p>
<p>Following is a short Python script that generates such a hash from an input value of the school's choice. It uses the SHA-1 hash algorithm to create the required 40-character offer ID.</p>
<pre><code class="python">&quot;&quot;&quot;script to generate offer IDs&quot;&quot;&quot;
import hashlib
import datetime


def create_hash(value):
    &quot;&quot;&quot;returns a one-time, unique 40-character SHA-1 hash using the value provided.&quot;&quot;&quot;
    val = value + datetime.datetime.now().isoformat()
    return hashlib.sha1(val).hexdigest()
</code></pre>

<p>This would return a unique offer ID that could be used as the 'oid' value in a student's offer URL.<br />
If run again with the same value, it will generate a completely new unique ID, because a new timestamp is used in creating each hash.</p>
<p>The school could generate an ID, using any input value desired, keep a record of it as the student's offer ID and use it in the student's disclosure URL as spelled out in the <a href="https://cfpb.github.io/college-costs/url-spec/">URL specification</a>.</p>
<p>The Python hashing script above is <a href="http://files.consumerfinance.gov.s3.amazonaws.com/pb/paying_for_college/scripts/create_offer_hash.py">available for download</a> and can be run from a shell command line with this command:</p>
<pre><code>python create_offer_hash.py [VALUE]
</code></pre>

<p>Replace '[VALUE]' with a value of your choice, and the script will generate a unique offer ID with each use.<br />
Example:</p>
<pre><code>python create_offer_hash.py student123
</code></pre>

<p>Entering that command will produce something like this:<br />
<code>2df92217303700c6165d56a24b89cef419133a89</code></p>
            </section>
        </div>

        <footer role="contentinfo">
            <div class="wrap">
                This project is maintained by <a href="https://cfpb.github.io">The Consumer Financial Protection Bureau.</a>.

                <p>Hosted on <a href="http://pages.github.com/">GitHub Pages</a>.</p>
            </div>
        </footer>
    </div> 
</body>
</html>
